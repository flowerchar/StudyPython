# 每日必会题

1. **简述定义闭包函数的必须要满足的条件**

   在使用闭包实现装饰器时，闭包函数的定义要满足三个条件：

   1. 在外函数内部定义一个内函数。
   2. 内函数中使用了外函数中定义的变量。
   3. 外函数返回内函数的引用。

2. **简述装饰器的作用，以及装饰器在装饰过程中的实现原理。**

   装饰器的作用是在已有函数功能的基础上，在不改变函数代码的前提下，为函数增加额外的功能，比如为函数添加函数执行时间的统计，引入日志功能，权限校验等。

   假设有装饰器形式如下：

   @wrapper

   def show():

   ​    pass

   在使用装饰器 wrapper 装饰 show函数时，相当于进行了展开操作

   show = wrapper(show)

   show 函数将自己本身的引用当做参数传入到装饰器的闭包函数中。然后装饰器返回了闭包中内函数的引用，给show重新赋值。让show指向了内函数。

   在执行show函数时，实际执行的是装饰器闭包函数中的内函数的功能。

3. 有这样一种棋类游戏，双方各有十枚棋子，分布在一个由十行十列组成的棋盘中。

   每个棋子落在行列的交叉点上。

   现在实现代码，用来实现棋子的移动，并记录棋子移动后的位置。

   在程序中，使用两个列表来分别记录棋子的方向和位置，每个列表只有两个元素

   方向列表元素约定：

   元素1表示x轴，元素2表示y轴

   元素值为 -1 表示在所在轴反向移动

   元素值为 0 表示不移动

   元素值为 1 表示在所在轴正向移动

   step 表示移动的步数。

   ```python
   '''使用闭包来实现棋子移动'''

   # 定义一个外函数
   def outer():
       # 定义一个外函数的局部变量
       position = [0,0]
       # 定义一个内函数
       def inner(direction, step):
           # 对两个方向变量进行判断，如果取绝对值以后差为0，说明两个值相同，不能移动
           if abs(direction[0])  - abs(direction[1]) == 0:
               print('一次只能走一个方向')
               return 
             
           # 如果差不为0，才会执行到此，这里没有做判断，直接执行了两个方向，因为有一个方向是不会改变的，所以没问题
           # 可以增加判断来根据方向只执行一个方向的语句
           # 在内函数中，使用外函数的局部变量
           position[0] = position[0] + direction[0] * step
           position[1] = position[1] + direction[1] * step
           print(position)
       # 在外函数中返回内函数的引用
       return inner

   # 通过闭包，来获取棋子对象
   move = outer()
   # 移动
   move([0, 1], 10)

   move([0, 1], 10)

   move([-1, 0], 10)

   ```

   知识点回顾

   - abs函数

     abs函数是Python内建的一个函数

     用来对参数取绝对值

   - 列表

     列表是一个序列

     通过列表来记录两个方向的数据

4. 实现装饰器，实现对函数执行时间进行计算的功能。

   ```python
   ''' 实现一个装饰器，可以统计被装饰函数的执行时间 '''
   # 导入模块
   import time

   # 定义闭包
   def count_time(func):
       def wrapper(*args,**kwargs):
           # 获取开始时间
           start_time = time.time()
           # 执行被装饰的函数
           return func(*args, **kwargs)
           # 获取结束时间
           end_time = time.time()
           # 显示被装饰的函数的执行时间
           print('一共用时 %s 秒' % (end_time - start_time))
       # 返回内函数
       return wrapper

   # 定义一个函数的功能，并使用装饰器进行装饰
   @count_time
   def my_count():
       s = 0
       for i in range(1000001):
           s += i
       print(s)

   # 执行函数
   my_count()

   ```

   知识点回顾

   - time模块

     time模块是系统用来获取时间相关操作的模块

     通过time 方法可以获取当前系统时间。